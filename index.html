<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WeblessHunter - Find Businesses Without Websites</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <!-- Onboarding Form -->
    <div id="onboardingContainer" class="onboarding-container">
        <!-- Step 1: Welcome -->
        <div id="step1" class="onboarding-step active">
            <div class="step-content">
                <div class="welcome-icon">ğŸ¯</div>
                <h1>Welcome to WeblessHunter</h1>
                <p class="welcome-text">Discover businesses without websites and turn them into clients using advanced radar search technology.</p>
                <div class="features-list">
                    <div class="feature-item">
                        <span class="feature-icon">ğŸ—ºï¸</span>
                        <span>Interactive map-based business discovery</span>
                    </div>
                    <div class="feature-item">
                        <span class="feature-icon">ğŸ’°</span>
                        <span>Identify potential clients without websites</span>
                    </div>
                    <div class="feature-item">
                        <span class="feature-icon">ğŸ“±</span>
                        <span>Direct WhatsApp contact integration</span>
                    </div>
                </div>
                <button onclick="nextStep()" class="btn-primary btn-large">Get Started</button>
            </div>
        </div>

        <!-- Step 2: User Info -->
        <div id="step2" class="onboarding-step">
            <div class="step-content">
                <h2>Tell us about yourself</h2>
                <p>Help us personalize your experience</p>
                
                <div class="form-group">
                    <label for="userName">Your Name</label>
                    <input type="text" id="userName" placeholder="Enter your full name">
                </div>
                
                <div class="form-group">
                    <label for="userRole">What do you do?</label>
                    <select id="userRole">
                        <option value="">Select your role</option>
                        <option value="freelancer">Freelancer</option>
                        <option value="agency">Agency Owner</option>
                        <option value="consultant">Consultant</option>
                        <option value="developer">Web Developer</option>
                        <option value="marketer">Digital Marketer</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                
                <div class="step-actions">
                    <button onclick="prevStep()" class="btn-secondary">Back</button>
                    <button onclick="nextStep()" class="btn-primary">Continue</button>
                </div>
            </div>
        </div>

        <!-- Step 3: Location -->
        <div id="step3" class="onboarding-step">
            <div class="step-content">
                <h2>Your Location</h2>
                <p>This helps us provide better search results</p>
                
                <div class="form-group">
                    <label for="userCountry">Country</label>
                    <select id="userCountry">
                        <option value="">Select your country</option>
                        <option value="IE">Ireland</option>
                        <option value="GB">United Kingdom</option>
                        <option value="US">United States</option>
                        <option value="CA">Canada</option>
                        <option value="AU">Australia</option>
                        <option value="DE">Germany</option>
                        <option value="FR">France</option>
                        <option value="ES">Spain</option>
                        <option value="IT">Italy</option>
                        <option value="NL">Netherlands</option>
                        <option value="IN">India</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                
                <div class="location-access">
                    <button onclick="requestLocationAccess()" class="btn-secondary btn-location">
                        ğŸ“ Allow Location Access
                    </button>
                    <p class="location-status" id="locationStatus">Optional: Get your precise location for better results</p>
                </div>
                
                <div class="step-actions">
                    <button onclick="prevStep()" class="btn-secondary">Back</button>
                    <button onclick="nextStep()" class="btn-primary">Continue</button>
                </div>
            </div>
        </div>

        <!-- Step 4: API Key -->
        <div id="step4" class="onboarding-step">
            <div class="step-content">
                <h2>Google Maps API Key</h2>
                <p>Required to search for businesses</p>
                
                <div class="api-info">
                    <div class="info-box">
                        <h4>How to get your API key:</h4>
                        <ol>
                            <li>Go to <a href="https://console.cloud.google.com/" target="_blank">Google Cloud Console</a></li>
                            <li>Create a new project or select existing one</li>
                            <li>Enable "Places API" and "Maps JavaScript API"</li>
                            <li>Create credentials (API Key)</li>
                            <li>Copy and paste the key below</li>
                        </ol>
                        <a href="https://developers.google.com/maps/documentation/places/web-service/get-api-key" target="_blank" class="help-link">
                            ğŸ“– Detailed Guide
                        </a>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="apiKey">Google Maps API Key</label>
                    <input type="text" id="apiKey" placeholder="Enter your Google Maps API key">
                    <div class="api-status" id="apiStatus"></div>
                </div>
                
                <div class="step-actions">
                    <button onclick="prevStep()" class="btn-secondary">Back</button>
                    <button onclick="validateAndFinish()" class="btn-primary" id="finishBtn">
                        <span id="finishBtnText">Validate & Start Hunting</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Main App (Hidden initially) -->
    <div id="mainApp" class="main-app" style="display: none;">
    <div class="dashboard">
        <!-- Sidebar/Search Panel -->
        <div class="sidebar">
            <header>
                <h1>ğŸ¯ WeblessHunter</h1>
                <p>Hunt down businesses without websites</p>
            </header>

            <div class="search-section">
                <div class="input-group" style="display: none;">
                    <label for="location">Location</label>
                    <input type="text" id="location" placeholder="Click on map or use current location" readonly>
                    <button onclick="useCurrentLocation()" class="btn-secondary">ğŸ“ Current Location</button>
                </div>
                
                <div class="control-group">
                    <label for="businessType">Business Type</label>
                    <select id="businessType">
                        <option value="all">All Types</option>
                        <option value="restaurant">Restaurants</option>
                        <option value="store">Retail Stores</option>
                        <option value="beauty_salon">Beauty Salons</option>
                        <option value="gym">Gyms & Fitness</option>
                        <option value="car_repair">Auto Services</option>
                        <option value="lawyer">Legal Services</option>
                        <option value="dentist">Healthcare</option>
                        <option value="real_estate_agency">Real Estate</option>
                        <option value="accounting">Accounting</option>
                        <option value="plumber">Home Services</option>
                    </select>
                </div>

                <div class="control-group">
                    <label for="searchIntensity">Search Intensity</label>
                    <select id="searchIntensity">
                        <option value="hyperlocal">ğŸ  Walking Distance (0.1-1km)</option>
                        <option value="neighborhood">ğŸ˜ï¸ Neighborhood (0.1-2km)</option>
                        <option value="district">ğŸŒ† District (0.1-5km)</option>
                        <option value="citywide">ğŸ™ï¸ Citywide (0.1-20km)</option>
                        <option value="regional">ğŸŒ Regional (0.1-50km)</option>
                    </select>
                </div>
                
                <button onclick="useCurrentLocation()" class="btn-secondary" style="width: 100%; margin-bottom: 12px;">
                    ğŸ“ Use Current Location
                </button>
                
                <button onclick="searchBusinesses()" class="btn-primary" id="searchBtn">
                    <div class="btn-content">
                        <div class="search-radar-btn"></div>
                        <span id="btnText">ğŸ” Find All Businesses</span>
                    </div>
                    <div class="progress-bar-btn" id="btnProgress"></div>
                </button>

                <div class="search-status" id="searchStatus">
                    <div class="status-text" id="statusText">Initializing search...</div>
                    <div class="status-details" id="statusDetails">Preparing to scan your area</div>
                    <div class="status-stats">
                        <div class="status-stat">
                            <span class="status-stat-value" id="areasScanned">0</span>
                            <span class="status-stat-label">Areas</span>
                        </div>
                        <div class="status-stat">
                            <span class="status-stat-value" id="businessesFound">0</span>
                            <span class="status-stat-label">Found</span>
                        </div>
                        <div class="status-stat">
                            <span class="status-stat-value" id="potentialClients">0</span>
                            <span class="status-stat-label">Clients</span>
                        </div>
                    </div>
                </div>

                <div class="stats-panel">
                    <h3>Search Statistics</h3>
                    <div class="stat-item">
                        <span class="stat-label">Total Found:</span>
                        <span class="stat-value" id="totalFound">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Without Website:</span>
                        <span class="stat-value" id="withoutWebsite">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Potential Revenue:</span>
                        <span class="stat-value" id="potentialRevenue">$0</span>
                    </div>
                </div>

                <div class="export-section">
                    <h3>Export Data</h3>
                    <button onclick="exportToCSV()" class="btn-secondary">ğŸ“Š Export CSV</button>
                    <button onclick="exportToJSON()" class="btn-secondary">ğŸ“„ Export JSON</button>
                    <button onclick="bulkContact()" class="btn-secondary" id="contactSelectedBtn" disabled>ğŸ“ Contact Selected</button>
                    <div class="selected-info" id="selectedInfo" style="display: none;">
                        <span id="selectedCount">0 selected</span>
                    </div>
                </div>
                
                <!-- Factory Reset Button -->
                <button onclick="factoryReset()" class="btn-outline-danger btn-factory-reset">
                    ğŸ”„ Factory Reset
                </button>
            </div>
        </div>

        <!-- Main Content Area -->
        <div class="main-content">
            <div class="toolbar">
                <div class="search-info">
                    <h2 id="results-title">Ready to Search</h2>
                    <p id="results-subtitle">Enter a location to find businesses without websites</p>
                </div>
                <div class="toolbar-actions">
                    <!-- Table View Controls -->
                    <div id="tableControls">
                        <input type="text" id="searchFilter" placeholder="Filter results..." oninput="filterResults()">
                        <select id="sortBy" onchange="sortResults()">
                            <option value="distance">Sort by Distance</option>
                            <option value="name">Sort by Name</option>
                            <option value="rating">Sort by Rating</option>
                            <option value="priority">Sort by Priority</option>
                        </select>
                        <button onclick="selectAll()" class="btn-secondary">Select All</button>
                    </div>
                    
                    <!-- Map View Controls -->
                    <div id="mapControls" style="display: none;">
                        <div class="map-filter-controls">
                            <label class="radio-label">
                                <input type="radio" name="mapFilter" value="all" checked onchange="filterMapView()">
                                <span>ğŸ¢ All Businesses</span>
                            </label>
                            <label class="radio-label">
                                <input type="radio" name="mapFilter" value="potential" onchange="filterMapView()">
                                <span>ğŸ’° Potential Clients Only</span>
                            </label>
                            <label class="radio-label">
                                <input type="radio" name="mapFilter" value="withWebsites" onchange="filterMapView()">
                                <span>ğŸŒ Businesses With Websites Only</span>
                            </label>
                        </div>
                    </div>
                </div>
            </div>

            <!-- View Tabs -->
            <div class="view-tabs">
                <button class="tab-btn active" onclick="switchView('map')" id="mapTab">ğŸ—ºï¸ Map View</button>
                <button class="tab-btn" onclick="switchView('table')" id="tableTab">ğŸ“Š Table View</button>
            </div>

            <!-- Table View -->
            <div class="table-container" id="tableView">
                <table id="results-table">
                    <thead>
                        <tr>
                            <th><input type="checkbox" id="selectAllCheckbox" onchange="toggleSelectAll()"></th>
                            <th>Business Name</th>
                            <th>Phone Number</th>
                            <th>Address</th>
                            <th>Distance</th>
                            <th>Rating</th>
                            <th>Estimated Value</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="results-body">
                        <tr class="empty-state">
                            <td colspan="8">
                                <div class="empty-content">
                                    <div class="empty-icon">ğŸ”</div>
                                    <h3>No search results yet</h3>
                                    <p>Use the search panel to find businesses without websites</p>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- Map View -->
            <div class="map-container" id="mapView" style="display: none;">
                <div id="resultsMap" style="width: 100%; height: 100%; border-radius: 8px;"></div>
            </div>
        </div>
        </div>
    </div>
    </div>

    <script src="app.js"></script>
    <script id="googleMapsScript"></script>
</body>
</html>
